<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Sign Up</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="signup-content">

  <h2>Create Your Account</h2>
  <p class="soft">Already have an account? <a routerLink="../login">Login here</a></p>

  <form class="validations-form" [formGroup]="signUpForm" (ngSubmit)="signup()">
      <ion-list class="inputs-list" lines="full">
        <ion-list-header>
          <ion-label class="header-title">Lets get to know you</ion-label>
        </ion-list-header>
  
        <ion-item class="input-item">
          <ion-label position="floating">First Name</ion-label>
          <ion-input type="text" formControlName="firstname" clearInput></ion-input>
        </ion-item>
        <div class="error-container">
          <ng-container *ngFor="let validation of validations.firstname">
            <div class="error-message" *ngIf="signUpForm.get('firstname').hasError(validation.type) && (signUpForm.get('firstname').dirty || signUpForm.get('firstname').touched)">
              <ion-icon name="information-circle-outline"></ion-icon>
              <span>{{ validation.message }}</span>
            </div>
          </ng-container>
        </div>
  
        <ion-item class="input-item">
          <ion-label position="floating">Last Name</ion-label>
          <ion-input type="text" formControlName="lastname" clearInput></ion-input>
        </ion-item>
        <div class="error-container">
          <ng-container *ngFor="let validation of validations.lastname">
            <div class="error-message" *ngIf="signUpForm.get('lastname').hasError(validation.type) && (signUpForm.get('lastname').dirty || signUpForm.get('lastname').touched)">
              <ion-icon name="information-circle-outline"></ion-icon>
              <span>{{ validation.message }}</span>
            </div>
          </ng-container>
        </div>
  
        <ion-item class="input-item">
          <ion-label position="floating">Email</ion-label>
          <ion-input type="text" formControlName="email" clearInput inputmode="email"></ion-input>
        </ion-item>
        <div class="error-container">
          <ng-container *ngFor="let validation of validations.email">
            <div class="error-message" *ngIf="signUpForm.get('email').hasError(validation.type) && (signUpForm.get('email').dirty || signUpForm.get('email').touched)">
              <ion-icon name="information-circle-outline"></ion-icon>
              <span>{{ validation.message }}</span>
            </div>
          </ng-container>
        </div>
  
        <ion-item class="input-item">
            <ion-label position="floating">Phone</ion-label>
            <ion-input type="text" formControlName="phone" clearInput inputmode="tel"></ion-input>
          </ion-item>
          <div class="error-container">
              <ng-container *ngFor="let validation of validations.phone">
                <div class="error-message" *ngIf="signUpForm.get('phone').hasError(validation.type) && (signUpForm.get('phone').dirty || signUpForm.get('phone').touched)">
                  <ion-icon name="information-circle-outline"></ion-icon>
                  <span>{{ validation.message }}</span>
                </div>
              </ng-container>
            </div>

      </ion-list>
  
      <ion-list class="inputs-list" lines="full">
        <ion-list-header>
          <ion-label class="header-title">Pick a memorable password</ion-label>
        </ion-list-header>
  
        <div formGroupName="matching_passwords">
          <ion-item class="input-item">
            <ion-label position="floating">Password</ion-label>
            <ion-input type="password" formControlName="password"></ion-input>
          </ion-item>
          <div class="error-container">
            <ng-container *ngFor="let validation of validations.password">
              <div class="error-message" *ngIf="signUpForm.get('matching_passwords').get('password').hasError(validation.type) && (signUpForm.get('matching_passwords').get('password').dirty || signUpForm.get('matching_passwords').get('password').touched)">
                <ion-icon name="information-circle-outline"></ion-icon>
                <span>{{ validation.message }}</span>
              </div>
            </ng-container>
          </div>
  
          <ion-item class="input-item">
            <ion-label position="floating">Confirm Password</ion-label>
            <ion-input type="password" formControlName="confirm_password"></ion-input>
          </ion-item>
          <div class="error-container">
            <ng-container *ngFor="let validation of validations.confirm_password">
              <div class="error-message" *ngIf="signUpForm.get('matching_passwords').get('confirm_password').hasError(validation.type) && (signUpForm.get('matching_passwords').get('confirm_password').dirty || signUpForm.get('matching_passwords').get('confirm_password').touched)">
                <ion-icon name="information-circle-outline"></ion-icon>
                <span>{{ validation.message }}</span>
              </div>
            </ng-container>
          </div>
        </div>
        <div class="error-container">
          <ng-container *ngFor="let validation of validations.matching_passwords">
            <div class="error-message" *ngIf="signUpForm.get('matching_passwords').hasError(validation.type) && (signUpForm.get('matching_passwords').get('confirm_password').dirty || signUpForm.get('matching_passwords').get('confirm_password').touched)">
              <ion-icon name="information-circle-outline"></ion-icon>
              <span>{{ validation.message }}</span>
            </div>
          </ng-container>
        </div>
      </ion-list>
  
      <ion-button class="submit-btn" type="submit" expand="block" fill="outline" [disabled]="!signUpForm.valid">Submit</ion-button>
    </form>

  <div class="legal-stuff">
    By creating an account you agree to our <a class="legal-action" (click)="showPrivacyModal()">Privacy Policy</a> and <a class="legal-action" (click)="showTermsModal()">Terms of use</a>.
  </div>
 
</ion-content>
